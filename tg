#!/usr/bin/env bash
set -euo pipefail

cmd=${1:-help}

case "$cmd" in
  up)
    docker compose up -d --build
    ;;
  down)
    docker compose down
    ;;
  restart)
    docker compose down && docker compose up -d --build
    ;;
  logs)
    docker compose logs -f --tail=200 ${2:-}
    ;;
  sh)
    docker compose exec app bash || docker compose exec app sh
    ;;
  artisan)
    shift || true
    docker compose exec app php artisan "$@"
    ;;
  migrate)
    docker compose exec app php artisan migrate
    ;;
  key)
    docker compose exec app php artisan key:generate
    ;;
  *)
    echo "Usage: ./tg <command>"
    echo "Commands: up | down | restart | logs [svc] | sh | artisan ... | migrate | key"
    ;;
esac


